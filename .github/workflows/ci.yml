name: CI

on:
  push:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Install Frontend Dependencies
        working-directory: ./Frontend
        run: npm install

      - name: Compile Selenium Tests
        run: npx tsc -p Frontend/tests/selenium/tsconfig.selenium.json

      - name: Rename compiled test to .cjs
        run: |
          if [ -f Frontend/dist/selenium/signup.test.js ]; then
            mv Frontend/dist/selenium/signup.test.js Frontend/dist/selenium/signup.test.cjs
          else
            echo "signup.test.js not found"
            exit 1
          fi

      - name: Run Selenium Signup Test
        run: node Frontend/dist/selenium/signup.test.cjs
